$schema: "http://json-schema.org/draft-07/schema#"
title: "Europass CV Validation Schema"
description: "Schema for validating Europass CV YAML files for PDF generation - relaxed to match LaTeX class requirements"
type: object

required:
  - name
  - personal_info
  - languages

anyOf:
  - required: [work_experience]
  - required: [education]

properties:
  name:
    type: string
    description: "Full name of the CV owner"
    minLength: 1
    maxLength: 100

  personal_info:
    type: object
    description: "Personal information section"
    required:
      - date_of_birth
      - nationality
    properties:
      address:
        type: string
        description: "Full postal address (hidden in anonymous mode)"
        minLength: 1
        maxLength: 200
      phone:
        type: string
        description: "Primary phone number (hidden in anonymous mode) - more flexible pattern"
        pattern: "^\\+?[\\d\\s\\.\\-\\(\\)]+$"
      mobile:
        type: string
        description: "Mobile phone number (optional, hidden in anonymous mode)"
        pattern: "^\\+?[\\d\\s\\.\\-\\(\\)]+$"
      email:
        type: string
        format: email
        description: "Email address (hidden in anonymous mode)"
      homepage:
        type: array
        description: "List of personal websites/portfolios (hidden in anonymous mode)"
        items:
          type: string
          minLength: 1
        minItems: 1
        maxItems: 10
      im:
        type: array
        description: "Instant messaging contacts (hidden in anonymous mode)"
        items:
          type: object
          required: [platform, handle]
          properties:
            platform:
              type: string
              minLength: 1
              description: "IM platform name (any platform accepted)"
            handle:
              type: string
              minLength: 1
              maxLength: 100
              description: "Username/handle on the platform"
          additionalProperties: false
        maxItems: 10
      date_of_birth:
        type: string
        description: "Date of birth - flexible format (YYYY-MM-DD or 'DD Month YYYY') (always visible)"
        minLength: 1
      nationality:
        type: string
        description: "Nationality (always visible)"
        minLength: 1
      gender:
        type: string
        description: "Gender (optional, but may be required for specific EU tenders)"
    additionalProperties: false

  job_applied_for:
    type: string
    description: "Position/role being applied for (optional, can be empty)"

  work_experience:
    type: array
    description: "Work experience entries"
    maxItems: 50
    items:
      type: object
      required: [period, title, employer, location]
      properties:
        period:
          type: string
          description: "Employment period - flexible format"
          minLength: 1
          maxLength: 100
        title:
          type: string
          description: "Job title/position"
          minLength: 1
          maxLength: 200
        employer:
          type: string
          description: "Company/organization name"
          minLength: 1
          maxLength: 200
        location:
          type: string
          description: "Work location (city, country)"
          minLength: 1
          maxLength: 200
        description:
          type: string
          description: "Job description and achievements (optional, can be empty)"
      additionalProperties: false

  education:
    type: array
    description: "Education and training entries"
    maxItems: 50
    items:
      type: object
      required: [degree, institution]
      properties:
        period:
          type: string
          description: "Education period - flexible format"
          minLength: 1
        degree:
          type: string
          description: "Degree or qualification obtained"
          minLength: 1
          maxLength: 200
        institution:
          type: string
          description: "Educational institution name"
          minLength: 1
          maxLength: 200
        level:
          type: string
          description: "ISCED education level (optional, e.g., 'ISCED 6' or 'ISCED~6') - can be empty"
        details:
          oneOf:
            - type: string
              description: "Additional details as text"
            - type: array
              description: "Additional details as list"
              items:
                type: string
      additionalProperties: false

  languages:
    type: object
    description: "Language skills section"
    required: [mother_tongue]
    properties:
      mother_tongue:
        type: string
        description: "Native/mother tongue language"
        minLength: 1
        maxLength: 100
      foreign_languages:
        type: array
        description: "Foreign language skills"
        items:
          type: object
          required: [language]
          properties:
            language:
              type: string
              description: "Language name"
              minLength: 1
              maxLength: 100
            listening:
              type: string
              description: "Listening skill level (CEFR) - optional"
            reading:
              type: string
              description: "Reading skill level (CEFR) - optional"
            spoken_interaction:
              type: string
              description: "Spoken interaction skill level (CEFR) - optional"
            spoken_production:
              type: string
              description: "Spoken production skill level (CEFR) - optional"
            writing:
              type: string
              description: "Writing skill level (CEFR) - optional"
            certificate:
              type: string
              description: "Language certificate details - optional"
          additionalProperties: false
        maxItems: 20
    additionalProperties: false

  skills:
    type: object
    description: "Skills and competences section (all fields optional)"
    properties:
      communication:
        type: array
        description: "Communication skills (optional)"
        items:
          type: string
          minLength: 1
        maxItems: 20
      organisational:
        type: array
        description: "Organisational/managerial skills (optional)"
        items:
          type: string
          minLength: 1
        maxItems: 20
      digital_competence:
        type: object
        description: "Digital competence levels (optional)"
        properties:
          information_processing:
            type: string
            description: "Information processing - accepts 'Basic', 'Independent', 'Proficient' or empty"
          communication:
            type: string
            description: "Digital communication - accepts 'Basic', 'Independent', 'Proficient' or empty"
          content_creation:
            type: string
            description: "Content creation - accepts 'Basic', 'Independent', 'Proficient' or empty"
          safety:
            type: string
            description: "Digital safety - accepts 'Basic', 'Independent', 'Proficient' or empty"
          problem_solving:
            type: string
            description: "Digital problem solving - accepts 'Basic', 'Independent', 'Proficient' or empty"
        additionalProperties: false
      computer:
        type: array
        description: "Computer skills and software knowledge (optional)"
        items:
          type: string
          minLength: 1
        maxItems: 50
      other:
        type: array
        description: "Other skills and interests (optional)"
        items:
          type: string
          minLength: 1
        maxItems: 50
    additionalProperties: false

  driving_license:
    type: string
    description: "Driving license categories (optional) - accepts formats like 'A, B' or 'A+B'"

  publications:
    type: array
    description: "Publications and research (optional)"
    items:
      type: object
      required: [title]
      properties:
        title:
          type: string
          description: "Publication title"
          minLength: 1
        year:
          type: integer
          minimum: 1900
          maximum: 2030
          description: "Publication year"
        journal:
          type: string
          description: "Journal or publication venue (optional)"
      additionalProperties: false
    maxItems: 100

additionalProperties: false
